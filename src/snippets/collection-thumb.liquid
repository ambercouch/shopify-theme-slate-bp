{%- if settingsId -%}
  {%-  assign collectionSettings = settings -%}
{% else %}
  {%-  assign collectionSettings = block.settings -%}
{%- endif -%}

{%- capture c -%}{{ settingsId }}collection{%- endcapture -%}
{%- capture cip -%}{{ settingsId }}collection_image_position{%- endcapture -%}
{%- capture ctp -%}{{ settingsId }}collection_title_position{%- endcapture -%}
{%- capture cht -%}{{ settingsId }}hide_collection_title{%- endcapture -%}
{%- capture ct -%}{{ settingsId }}collection_title{%- endcapture -%}
{%- capture cb -%}{{ settingsId }}collection_button{%- endcapture -%}
{%- capture cbbc -%}{{ settingsId }}collection_button_background_colour{%- endcapture -%}
{%- capture cbtc -%}{{ settingsId }}collection_button_text_colour{%- endcapture -%}

{% if collectionSettings %}
<div class="collection-thumb is-img-{{ collectionSettings[cip] }}" {{ block.shopify_attributes }}>
  {%- assign collection = collections[collectionSettings[c]] -%}

  <a class="collection-thumb__link" href="{% if collection.empty? %}#{% else %}{{ collection.url }}{% endif %}">
    {% if collection.image != blank %}
      <img class="collection-thumb__img" src="{{ collection | img_url: '600x600' }}" >
      {% elsif collection.products.first != blank %}
      <img class="collection-thumb__img" src="{{ collection.products.first | img_url: '600x600' }}" >
      {% elsif collection.empty? %}
      {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
      {{ 'collection-' | append: current | placeholder_svg_tag: 'placeholder-svg placeholder-svg--small' }}
    {% endif %}

    <div class="collection-thumb__heading is-{{ collectionSettings[ctp] }}">
      <h5 class="collection-thumb__title " {% if collectionSettings[cht] == true %}style="display:none !important" {% endif %}>
        {% if collection.empty? %}
          {{ 'homepage.onboarding.collection_title' | t }}
        {% elsif collectionSettings[ct] == '' %}
          {{ collection.title }}
        {% else %}
          {{ collectionSettings[ct] }}
        {% endif %}
      </h5>
      {% if collectionSettings[cb] != '' %}
      <div class="collection-thumb__shop-btn">
        <span class="shop-btn--{{ collectionSettings[cbbc] }}">
          <span class="shop-btn__text--{{ collectionSettings[cbtc] }}">{{ collectionSettings[cb] }}</span>
        </span>
      </div>
      {% endif %}
    </div>
  </a>
</div>
{%- else -%}
  <p>There are no settings for this collection  {{ settingsId }}</p>
{%- endif -%}