{% assign zp_opened_product_tag = '<zpdproduct ' %} {% assign zp_closed_product_tag = '</zpdproduct>' %} {% assign zp_entity_products = zp_current_entity_content | split: zp_opened_product_tag %} {% assign zp_current_entity_content = '' %} {% if zp_product_image_size == nil %}{% assign zp_current_product_image_size = '1080x' %}{% else %}{% assign zp_current_product_image_size = zp_product_image_size %}{% endif %} {% assign zp_empty_image_src = 'no-image.gif' | img_url: zp_current_product_image_size %}
{% for zp_part in zp_entity_products %}
  {% assign zp_product_content = zp_part | append: ' ' | split: zp_closed_product_tag %}
  {% if zp_product_content.size < 2 %}
    {% assign zp_current_entity_content = zp_current_entity_content | append: zp_part %}
  {% else %}
    {% assign zp_product_content_parts = zp_product_content[0] | append: ' ' | split: '>' %}{% assign zp_product_settings = zp_product_content_parts[0] %}{% assign zp_product_settings_tmp = zp_product_settings | append: '>' %}{% assign zp_product_content_parts = zp_product_content_parts | join: '>' | remove_first: zp_product_settings_tmp %}{% assign zp_product_settings = zp_product_settings | split: 'data-' %}{% assign zp_product_settings_keys = '' %}{% assign zp_product_settings_values = '' %}{% for zp_product_setting in zp_product_settings %} {% assign zp_product_setting_parts = zp_product_setting | split: '=' %} {% if zp_product_setting_parts.size < 2 %} {% continue %} {% endif %} {% assign zp_product_setting_key = '' | append: zp_product_setting_parts[0] | strip %} {% if zp_product_setting_key.size < 1 %} {% continue %} {% endif %} {% assign zp_product_settings_keys = zp_product_settings_keys | append: zp_product_setting_key | append: '__zp1575881642__' %} {% assign zp_product_setting_size = zp_product_setting | size %} {% assign zp_product_setting_key_size = '' | append: zp_product_setting_parts[0] | size | plus: 1 %} {% assign zp_product_setting_value = '' | append: zp_product_setting | slice: zp_product_setting_key_size, zp_product_setting_size | strip %} {% assign zp_product_setting_value_last_index = zp_product_setting_value | size | minus: 1 %} {% assign zp_product_setting_value_first_letter = zp_product_setting_value | first %} {% if zp_product_setting_value_first_letter == '"' or zp_product_setting_value_first_letter == "'" %} {% assign zp_product_setting_value = zp_product_setting_value | slice: 1, zp_product_setting_value_last_index %} {% endif %} {% assign zp_product_setting_value_last_index = zp_product_setting_value | size | minus: 1 %} {% assign zp_product_setting_value_last_letter = zp_product_setting_value | last %} {% if zp_product_setting_value_last_letter == '"' or zp_product_setting_value_last_letter == "'" %} {% assign zp_product_setting_value = zp_product_setting_value | slice: 0, zp_product_setting_value_last_index %} {% endif %} {% assign zp_product_settings_values = zp_product_settings_values | append: zp_product_setting_value | append: '__zp1575881642__' %}{% endfor %}{% assign zp_product_settings_keys = zp_product_settings_keys | split: '__zp1575881642__' %}{% assign zp_product_settings_values = zp_product_settings_values | split: '__zp1575881642__' %}{% assign zp_product_settings = '' %}{% assign zp_product_settings_tmp = '' %}{% assign zp_product_setting_parts = '' %}{% assign zp_product_handle = '' %}{% assign zp_selected_variants = '' %}{% assign zp_selected_variants_list = '' %}{% assign zp_product_default_quantity = '1' %}{% assign zp_product_show_quantity = true %}{% assign zp_product_link_type = 'cart' %}{% assign zp_redirect_product_url = '/cart' %}{% assign zp_product_type = 'base' %}{% assign zp_product_add_to_cart_msg = 'Product has been added to cart' %}{% assign zp_product_button_link_target = '_self' %}{% assign zp_product_image_type = 'product' %}{% assign zp_product_discount_data = '' %}{% assign zp_product_block_id = '' %}{% assign zp_product_add_to_cart_classes = '' %}{% assign zp_product_message_wrapper_classes = '' %}{% assign zp_product_variant_selector_label_classes = '' %}{% assign zp_product_quantity_selector_label_classes = '' %}{% assign zp_product_variant_selector_view = 'vt' %}{% assign zp_product_image_sizes_data = '' %}{% assign zp_product_form_classes = '' %}{% assign zp_product_view_type = 'dynamicbuybox' %}{% assign zp_product_static_price_content = '' %}{% assign zp_product_static_compare_price_content = '' %}{% assign zp_product_preload_variant_images = false %}{% assign zp_product_load_main_image = true %}{% assign zp_product_show_quantity_label = true %}{% assign zp_product_show_variant_selector_label = true %}{% for zp_product_setting_key in zp_product_settings_keys %} {% assign zp_product_setting_value = '' | append: zp_product_settings_values[forloop.index0] | strip %} {% if zp_product_setting_key == 'handle' %} {% assign zp_product_handle = zp_product_setting_value %} {% elsif zp_product_setting_key == 'slctvrnt' %} {% assign zp_selected_variants = zp_product_setting_value %} {% assign zp_selected_variants_list = zp_product_setting_value %} {% elsif zp_product_setting_key == 'qty' %} {% assign zp_product_default_quantity = zp_product_setting_value %} {% elsif zp_product_setting_key == 'shwqty' %} {% if zp_product_setting_value == 'true' or zp_product_setting_value == '1' %}{% assign zp_product_show_quantity = true %}{% else %}{% assign zp_product_show_quantity = false %}{% endif %} {% elsif zp_product_setting_key == 'btnltp' %} {% assign zp_product_link_type = zp_product_setting_value %} {% elsif zp_product_setting_key == 'url' %} {% assign zp_redirect_product_url = zp_product_setting_value | replace: '&amp;', '&' | url_escape | replace: '%23', '#' %}{% if zp_redirect_product_url contains 'https://www.amazon.com' %}{% assign zp_redirect_product_url = zp_redirect_product_url | replace: '%25', '%' %}{% endif %} {% elsif zp_product_setting_key == 'btncpt' %} {% assign zp_product_button_caption = zp_product_setting_value %} {% elsif zp_product_setting_key == 'type' %} {% assign zp_product_type = zp_product_setting_value %} {% elsif zp_product_setting_key == 'addcrtmsg' %} {% assign zp_product_add_to_cart_msg = zp_product_setting_value | url_escape %} {% elsif zp_product_setting_key == 'btnelt' %} {% assign zp_product_button_link_target = zp_product_setting_value %} {% elsif zp_product_setting_key == 'imgtp' %} {% assign zp_product_image_type = zp_product_setting_value %} {% elsif zp_product_setting_key == 'dscntdt' %} {% assign zp_product_discount_data = zp_product_setting_value %} {% elsif zp_product_setting_key == 'bid' %} {% assign zp_product_block_id = zp_product_setting_value %} {% elsif zp_product_setting_key == 'crtmsgcls' %} {% assign zp_product_add_to_cart_classes = zp_product_setting_value | url_escape %} {% elsif zp_product_setting_key == 'msgwrpcl' %} {% assign zp_product_message_wrapper_classes = zp_product_setting_value | url_escape %} {% elsif zp_product_setting_key == 'vrntcls' %} {% assign zp_product_variant_selector_classes = zp_product_setting_value | url_escape %} {% elsif zp_product_setting_key == 'qtycls' %} {% assign zp_product_quantity_selector_label_classes = zp_product_setting_value %} {% elsif zp_product_setting_key == 'vrntsv' %} {% assign zp_product_variant_selector_view = zp_product_setting_value %} {% elsif zp_product_setting_key == 'imgszs' %} {% assign zp_product_image_sizes_data = zp_product_setting_value %} {% elsif zp_product_setting_key == 'frmcls' %} {% assign zp_product_form_classes = zp_product_setting_value %} {% elsif zp_product_setting_key == 'vtp' %} {% assign zp_product_view_type = zp_product_setting_value %} {% elsif zp_product_setting_key == 'stcprc' %} {% assign zp_product_static_price_content = zp_product_setting_value %} {% elsif zp_product_setting_key == 'stccprprc' %} {% assign zp_product_static_compare_price_content = zp_product_setting_value %} {% elsif zp_product_setting_key == 'imgprld' %} {% if zp_product_setting_value == '1' %} {% assign zp_product_preload_variant_images = true %} {% endif %} {% elsif zp_product_setting_key == 'mimgld' %} {% if zp_product_setting_value == '0' %} {% assign zp_product_load_main_image = false %} {% endif %} {% elsif zp_product_setting_key == 'shwqtylb' %} {% if zp_product_setting_value == '0' %} {% assign zp_product_show_quantity_label = false %} {% endif %} {% elsif zp_product_setting_key == 'shwvrntlb' %} {% if zp_product_setting_value == '0' %} {% assign zp_product_show_variant_selector_label = false %} {% endif %} {% endif %}{% endfor %}
    {% assign zp_product_init_script = '' %} {% assign zp_product_additional_integrations = '' %} {% assign zp_product_form_open_tag = '' %} {% assign zp_product_form_closed_tag = '' %} {% assign zp_unavailable_product_class = ' hidden' %} {% assign zp_unavailable_discount_class = '' %} {% assign zp_product_variants_container = '' %} {% assign zp_product_quantity_container = '' %} {% assign zp_product_button_type = 'button' %} {% assign zp_product_button_integrations = '' %} {% assign zp_product_button_messages = '' %} {% assign zp_product_image = zp_empty_image_src %} {% assign zp_product_image_data_attrs = '' %} {% assign zp_product_wrapper_selector = '' %} {% assign zp_formatted_product_price = '' %} {% assign zp_formatted_product_compare_at_price = '' %} {% assign zp_unavailable_quantity_class = ' hidden' %} {% capture zp_product_button_text %}{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation }}{% endcapture %} {% assign zp_product_sale_price = 0 %} {% assign zp_product_saved_amount = 0 %} {% assign zp_product_discount_amount = 0 %} {% assign zp_product_image_loader_content = '' %}
    {% if zp_product_handle.size > 0 %}
      {% assign product = all_products[zp_product_handle] %} {% assign zp_product_id_size = '' | append: product.id | size %} {% assign zp_product_found = true %} {% if zp_product_id_size < 1 %} {% assign product = nil %} {% assign zp_product_found = false %} {% endif %} {% capture zp_product_var_content %} {% if zp_selected_variants.size < 1 %} {% assign zp_selected_variants = product.variants | map: 'id' | join: ',' | split: ',' %} {% endif %} {% assign zp_filtered_selected_variants = '' %} {% assign zp_first_selected_variant = nil %} {% assign zp_any_product_variant_available = false %} {% for zp_prd_variant in product.variants %} {% assign zp_variant_id = '' | append: zp_prd_variant.id %} {% if zp_selected_variants contains zp_variant_id %} {% assign zp_filtered_selected_variants = zp_filtered_selected_variants | append: zp_variant_id | append: ',' %} {% if zp_first_selected_variant == nil %} {% assign zp_first_selected_variant = zp_prd_variant %} {% endif %} {% if zp_prd_variant.available %} {% assign zp_any_product_variant_available = true %} {% endif %} {% endif %} {% endfor %} {% assign zp_selected_variants = zp_filtered_selected_variants | split: ',' %} {% if zp_selected_variants.size < 1 %} {% assign zp_selected_variants = product.variants | map: 'id' | join: ',' | split: ',' %} {% assign zp_first_selected_variant = product.variants | first %} {% endif %} {% assign zp_first_available_variant = nil %} {% for zp_prd_variant in product.variants %} {% assign zp_variant_id = '' | append: zp_prd_variant.id %} {% if zp_selected_variants contains zp_variant_id and zp_prd_variant.available %} {% assign zp_first_available_variant = zp_prd_variant %} {% break %} {% endif %} {% endfor %} {% unless zp_first_available_variant == nil %} {% assign zp_first_selected_variant = zp_first_available_variant %} {% endunless %} {% assign zp_variant_id = nil %} {% assign zp_first_available_variant = nil %} {% assign zp_current_product_price = zp_first_selected_variant.price %}{% endcapture %}{% assign zp_product_var_content = '' %} {% if zp_show_variants_selectors_link_types contains zp_product_link_type %}{% assign zp_show_variants_selectors = true %}{% else %}{% assign zp_show_variants_selectors = false %}{% endif %} {% assign zp_product_iterator = zp_product_iterator | plus: 1 %} {% assign zp_product_selector = zp_main_product_selector | append: zp_product_iterator %} {% assign zp_product_wrapper_selector = zp_product_selector | append: zp_main_product_selector_suffix %} {% assign zp_product_featured_image = product.featured_image %} {% assign zp_product_default_image = zp_product_featured_image | img_url: 'master' %} {% assign zp_product_image_sizes_data_parts = '' | append: zp_product_image_sizes_data | split: ':|~|:' %}{% assign zp_product_image_src_set_string = '' %}{% assign zp_product_image_sizes_list_string = '' %}{% assign zp_product_image_sizes_json_string = '' %}{% assign zp_current_product_image_size = nil %}{% for zp_image_size_data in zp_product_image_sizes_data_parts %} {% assign zp_image_size_data_parts = '' | append: zp_image_size_data | split: ':--:' %} {% assign zp_image_screen_size = zp_image_size_data_parts[0] %} {% assign zp_image_resize_filter = zp_image_size_data_parts[1] %} {% if zp_image_screen_size.size > 0 and zp_image_resize_filter.size > 0 %} {% assign zp_product_image_url_with_filter = zp_product_featured_image | img_url: zp_image_resize_filter %} {% assign zp_image_screen_size_width = zp_image_screen_size | append: 'w' %} {% assign zp_product_image_src_set_string = zp_product_image_src_set_string | append: zp_product_image_url_with_filter | append: ' ' | append: zp_image_screen_size_width | append: '__zp1575881642__' %} {% assign zp_product_image_sizes_list_string = zp_product_image_sizes_list_string | append: zp_image_screen_size | append: 'px' | append: '__zp1575881642__' %} {% assign zp_image_screen_size_width_json = zp_image_screen_size_width | json %} {% assign zp_image_resize_filter_json = zp_image_resize_filter | json %} {% assign zp_product_image_sizes_json_string = zp_product_image_sizes_json_string | append: '{"filter":' | append: zp_image_resize_filter_json | append: ',"screen":' | append: zp_image_screen_size_width_json | append: '}' | append: '__zp1575881642__' %} {% unless zp_current_product_image_size %} {% assign zp_current_product_image_size = zp_image_resize_filter %} {% endunless %} {% endif %}{% endfor %}{% unless zp_current_product_image_size %} {% assign zp_current_product_image_size = '1080x' %}{% endunless %}{% assign zp_product_image_src_set = zp_product_image_src_set_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_product_image_sizes_list = zp_product_image_sizes_list_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_product_image_sizes_json = zp_product_image_sizes_json_string | split: '__zp1575881642__' | join: ',' | prepend: '[' | append: ']' %} {% assign zp_first_selected_variant_image_id = '' | append: zp_first_selected_variant.image.id | strip %}{% if zp_product_image_type == 'variant' and zp_show_variants_selectors == true and zp_first_selected_variant_image_id.size > 0 %}{% assign zp_product_featured_image = zp_first_selected_variant.image %}{% endif %}{% assign zp_product_image_srcset_available = true %} {% if zp_product_image_src_set.size < 1 %} {% assign zp_product_image_sizes_data = '1080:--:1080x:|~|:936:--:936x:|~|:774:--:774x:|~|:540:--:540x:|~|:350:--:350x' %} {% assign zp_product_image_sizes_data_parts = '' | append: zp_product_image_sizes_data | split: ':|~|:' %}{% assign zp_product_image_src_set_string = '' %}{% assign zp_product_image_sizes_list_string = '' %}{% assign zp_product_image_sizes_json_string = '' %}{% assign zp_current_product_image_size = nil %}{% for zp_image_size_data in zp_product_image_sizes_data_parts %} {% assign zp_image_size_data_parts = '' | append: zp_image_size_data | split: ':--:' %} {% assign zp_image_screen_size = zp_image_size_data_parts[0] %} {% assign zp_image_resize_filter = zp_image_size_data_parts[1] %} {% if zp_image_screen_size.size > 0 and zp_image_resize_filter.size > 0 %} {% assign zp_product_image_url_with_filter = zp_product_featured_image | img_url: zp_image_resize_filter %} {% assign zp_image_screen_size_width = zp_image_screen_size | append: 'w' %} {% assign zp_product_image_src_set_string = zp_product_image_src_set_string | append: zp_product_image_url_with_filter | append: ' ' | append: zp_image_screen_size_width | append: '__zp1575881642__' %} {% assign zp_product_image_sizes_list_string = zp_product_image_sizes_list_string | append: zp_image_screen_size | append: 'px' | append: '__zp1575881642__' %} {% assign zp_image_screen_size_width_json = zp_image_screen_size_width | json %} {% assign zp_image_resize_filter_json = zp_image_resize_filter | json %} {% assign zp_product_image_sizes_json_string = zp_product_image_sizes_json_string | append: '{"filter":' | append: zp_image_resize_filter_json | append: ',"screen":' | append: zp_image_screen_size_width_json | append: '}' | append: '__zp1575881642__' %} {% unless zp_current_product_image_size %} {% assign zp_current_product_image_size = zp_image_resize_filter %} {% endunless %} {% endif %}{% endfor %}{% unless zp_current_product_image_size %} {% assign zp_current_product_image_size = '1080x' %}{% endunless %}{% assign zp_product_image_src_set = zp_product_image_src_set_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_product_image_sizes_list = zp_product_image_sizes_list_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_product_image_sizes_json = zp_product_image_sizes_json_string | split: '__zp1575881642__' | join: ',' | prepend: '[' | append: ']' %} {% endif %} {% assign zp_product_image = zp_product_featured_image | img_url: zp_current_product_image_size %} {% if zp_product_load_main_image == false %} {% assign zp_product_image = '' %} {% endif %} {% if zp_product_preload_variant_images %} {% assign zp_product_image_loader_content = '<svg class="hidden" width="215px" height="150px" data-zp-image-loader><use xlink:href="#elementLoader"></use></svg>' %} {% endif %} {% if zp_product_image_type == 'custom' %} {% assign zp_product_image_srcset_available = false %} {% endif %} {% capture zp_product_image_data_attrs %} sizes="{{ zp_product_image_sizes_list }}"{% if zp_product_image_srcset_available and zp_product_load_main_image %} srcset="{{ zp_product_image_src_set }}"{% endif %} data-zp-product-image data-zp-product-image-type="{{ zp_product_image_type }}" data-zp-image-id="{{ zp_product_featured_image.id }}" data-zp-default-image="{{ zp_product_default_image }}"{% endcapture %} {% if zp_product_redirect_with_params == nil %}{% assign zp_current_product_redirect_with_params = false %}{% else %}{% assign zp_current_product_redirect_with_params = zp_product_redirect_with_params %}{% endif %} {% assign zp_cross_sell_available = false %} {% assign zp_cross_sell_selector = 'zpcrosssellselector' | append: zp_product_iterator %} {% assign zp_cross_sell_product = nil %} {% assign zp_opened_cross_sell_tag = '<zpdcsproduct ' %} {% assign zp_closed_cross_sell_tag = '</zpdcsproduct>' %}
      {% if zp_any_product_variant_available %}
        {% capture zp_product_form_open_tag %}<form class="{% capture zp_product_form_classes_list %}{% if zp_integrate_with_bold_quantity_breaks == true %}shapp_qb_prod{% endif %} {{ zp_product_form_classes }}{% endcapture %}{{ zp_product_form_classes_list | strip }}" method="post" enctype="multipart/form-data" data-zp-add-to-cart-form data-zp-link-type="{{ zp_product_link_type }}" data-zp-product-url="{{ zp_redirect_product_url }}" data-productid="{{ product.id }}" data-zp-redirect-with-url-params="{{ zp_current_product_redirect_with_params }}">{% endcapture %} {% assign zp_product_form_closed_tag = '</form>' %} {% assign zp_product_form_classes = '' %} {% assign zp_product_form_classes_list = '' %} {% assign zp_unavailable_product_class = '' %} {% if zp_product_show_quantity %} {% assign zp_unavailable_quantity_class = '' %} {% else %} {% assign zp_unavailable_quantity_class = ' hidden' %} {% endif %} {% if zp_include_bold_snippets_link_types contains zp_product_link_type %}{% assign zp_include_bold_snippets = true %}{% else %}{% assign zp_include_bold_snippets = false %}{% endif %} {% if zp_include_bold_snippets == true and zp_app_integrations contains 'productoptionsbybold' %}{% assign zp_integrate_with_bold_product_options = true %}{% else %}{% assign zp_integrate_with_bold_product_options = false %}{% endif %}{% if zp_include_bold_snippets == true and zp_app_integrations contains 'quantitybreaksbybold' %}{% assign zp_integrate_with_bold_quantity_breaks = true %}{% else %}{% assign zp_integrate_with_bold_quantity_breaks = false %}{% endif %} {% assign zp_product_button_type = 'submit' %}
        {% if zp_product_content_parts contains zp_opened_cross_sell_tag %} {% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_image_src = 'no-image.gif' | img_url: '220x' %}{% assign zp_cross_sell_image = zp_cross_sell_empty_image_src %}{% assign zp_cross_sell_sale_price = 0 %}{% assign zp_unavailable_cross_sell_class = 'hidden' %}{% assign zp_cross_sell_image_data_attrs = '' %}{% assign zp_unavailable_cross_sell_quantity_class = 'hidden' %}{% assign zp_cross_sell_variants_container = '' %}{% assign zp_cross_sell_quantity_container = '' %}{% assign zp_cross_sell_inventory_messages = '' %}{% assign zp_cross_sell_product_messages = '' %}{% assign zp_cross_sell_load_main_image = true %}{% assign zp_cross_sell_show_quantity_label = true %}{% assign zp_cross_sell_show_variant_selector_label = true %}{% assign zp_cross_sell_default_quantity = '1' %}{% assign zp_cross_sell_variant_selector_view = 'vt' %} {% if zp_any_product_variant_available and zp_show_variants_selectors %} {% assign zp_cross_sell_content_parts = zp_product_content_parts | split: zp_opened_cross_sell_tag %} {% assign zp_product_content_parts = '' %} {% for zp_cross_sell_content_part in zp_cross_sell_content_parts %} {% assign zp_cross_sell_content = zp_cross_sell_content_part | append: ' ' | split: zp_closed_cross_sell_tag %} {% if zp_cross_sell_content.size < 2 %} {% assign zp_product_content_parts = zp_product_content_parts | append: zp_cross_sell_content_part %} {% else %} {% assign zp_cross_sell_content_parts = zp_cross_sell_content[0] | append: ' ' | split: '>' %}{% assign zp_product_settings = zp_cross_sell_content_parts[0] %}{% assign zp_product_settings_tmp = zp_product_settings | append: '>' %}{% assign zp_cross_sell_content_parts = zp_cross_sell_content_parts | join: '>' | remove_first: zp_product_settings_tmp %}{% assign zp_product_settings = zp_product_settings | split: 'data-' %}{% assign zp_product_settings_keys = '' %}{% assign zp_product_settings_values = '' %}{% for zp_product_setting in zp_product_settings %} {% assign zp_product_setting_parts = zp_product_setting | split: '=' %} {% if zp_product_setting_parts.size < 2 %} {% continue %} {% endif %} {% assign zp_product_setting_key = '' | append: zp_product_setting_parts[0] | strip %} {% if zp_product_setting_key.size < 1 %} {% continue %} {% endif %} {% assign zp_product_settings_keys = zp_product_settings_keys | append: zp_product_setting_key | append: '__zp1575881642__' %} {% assign zp_product_setting_size = zp_product_setting | size %} {% assign zp_product_setting_key_size = '' | append: zp_product_setting_parts[0] | size | plus: 1 %} {% assign zp_product_setting_value = '' | append: zp_product_setting | slice: zp_product_setting_key_size, zp_product_setting_size | strip %} {% assign zp_product_setting_value_last_index = zp_product_setting_value | size | minus: 1 %} {% assign zp_product_setting_value_first_letter = zp_product_setting_value | first %} {% if zp_product_setting_value_first_letter == '"' or zp_product_setting_value_first_letter == "'" %} {% assign zp_product_setting_value = zp_product_setting_value | slice: 1, zp_product_setting_value_last_index %} {% endif %} {% assign zp_product_setting_value_last_index = zp_product_setting_value | size | minus: 1 %} {% assign zp_product_setting_value_last_letter = zp_product_setting_value | last %} {% if zp_product_setting_value_last_letter == '"' or zp_product_setting_value_last_letter == "'" %} {% assign zp_product_setting_value = zp_product_setting_value | slice: 0, zp_product_setting_value_last_index %} {% endif %} {% assign zp_product_settings_values = zp_product_settings_values | append: zp_product_setting_value | append: '__zp1575881642__' %}{% endfor %}{% assign zp_product_settings_keys = zp_product_settings_keys | split: '__zp1575881642__' %}{% assign zp_product_settings_values = zp_product_settings_values | split: '__zp1575881642__' %}{% assign zp_product_settings = '' %}{% assign zp_product_settings_tmp = '' %}{% assign zp_product_setting_parts = '' %} {% assign zp_cross_sell_handle = '' %} {% assign zp_cross_sell_selected_variants = '' %} {% assign zp_cross_sell_selected_variants_list = '' %} {% assign zp_cross_sell_image_type = 'product' %} {% assign zp_cross_sell_show_quantity = true %} {% assign zp_cross_sell_block_id = '' %} {% for zp_product_setting_key in zp_product_settings_keys %} {% assign zp_product_setting_value = '' | append: zp_product_settings_values[forloop.index0] | strip %} {% if zp_product_setting_key == 'handle' %} {% assign zp_cross_sell_handle = zp_product_setting_value %} {% elsif zp_product_setting_key == 'slctvrnt' %} {% assign zp_cross_sell_selected_variants = zp_product_setting_value %} {% assign zp_cross_sell_selected_variants_list = zp_product_setting_value %} {% elsif zp_product_setting_key == 'qty' %} {% assign zp_cross_sell_default_quantity = zp_product_setting_value %} {% elsif zp_product_setting_key == 'bid' %} {% assign zp_cross_sell_block_id = zp_product_setting_value %} {% elsif zp_product_setting_key == 'imgtp' %} {% assign zp_cross_sell_image_type = zp_product_setting_value %} {% elsif zp_product_setting_key == 'vrntsv' %} {% assign zp_cross_sell_variant_selector_view = zp_product_setting_value %} {% elsif zp_product_setting_key == 'shwqty' %} {% if zp_product_setting_value == '0' %} {% assign zp_cross_sell_show_quantity = false %} {% endif %} {% elsif zp_product_setting_key == 'mimgld' %} {% if zp_product_setting_value == '0' %} {% assign zp_cross_sell_load_main_image = false %} {% endif %} {% elsif zp_product_setting_key == 'shwqtylb' %} {% if zp_product_setting_value == '0' %} {% assign zp_cross_sell_show_quantity_label = false %} {% endif %} {% elsif zp_product_setting_key == 'shwvrntlb' %} {% if zp_product_setting_value == '0' %} {% assign zp_cross_sell_show_variant_selector_label = false %} {% endif %} {% endif %} {% endfor %} {% if zp_cross_sell_handle.size > 0 %} {% assign zp_cross_sell_product = all_products[zp_cross_sell_handle] %} {% assign zp_cross_sell_id = '' | append: zp_cross_sell_product.id %} {% if zp_cross_sell_id.size > 0 %} {% capture zp_product_var_content %} {% if zp_cross_sell_selected_variants.size < 1 %} {% assign zp_cross_sell_selected_variants = zp_cross_sell_product.variants | map: 'id' | join: ',' | split: ',' %} {% endif %} {% assign zp_filtered_selected_variants = '' %} {% assign zp_cross_sell_first_selected_variant = nil %} {% assign zp_any_cross_sell_variant_available = false %} {% for zp_prd_variant in zp_cross_sell_product.variants %} {% assign zp_variant_id = '' | append: zp_prd_variant.id %} {% if zp_cross_sell_selected_variants contains zp_variant_id %} {% assign zp_filtered_selected_variants = zp_filtered_selected_variants | append: zp_variant_id | append: ',' %} {% if zp_cross_sell_first_selected_variant == nil %} {% assign zp_cross_sell_first_selected_variant = zp_prd_variant %} {% endif %} {% if zp_prd_variant.available %} {% assign zp_any_cross_sell_variant_available = true %} {% endif %} {% endif %} {% endfor %} {% assign zp_cross_sell_selected_variants = zp_filtered_selected_variants | split: ',' %} {% if zp_cross_sell_selected_variants.size < 1 %} {% assign zp_cross_sell_selected_variants = zp_cross_sell_product.variants | map: 'id' | join: ',' | split: ',' %} {% assign zp_cross_sell_first_selected_variant = zp_cross_sell_product.variants | first %} {% endif %} {% assign zp_cross_sell_first_available_variant = nil %} {% for zp_prd_variant in zp_cross_sell_product.variants %} {% assign zp_variant_id = '' | append: zp_prd_variant.id %} {% if zp_cross_sell_selected_variants contains zp_variant_id and zp_prd_variant.available %} {% assign zp_cross_sell_first_available_variant = zp_prd_variant %} {% break %} {% endif %} {% endfor %} {% unless zp_cross_sell_first_available_variant == nil %} {% assign zp_cross_sell_first_selected_variant = zp_cross_sell_first_available_variant %} {% endunless %} {% assign zp_variant_id = nil %} {% assign zp_cross_sell_first_available_variant = nil %} {% assign zp_current_cross_sell_price = zp_cross_sell_first_selected_variant.price %}{% endcapture %}{% assign zp_product_var_content = '' %} {% if zp_any_cross_sell_variant_available %} {% assign zp_cross_sell_available = true %} {% assign zp_unavailable_cross_sell_class = '' %} {% assign zp_cross_sell_featured_image = zp_cross_sell_product.featured_image %} {% assign zp_cross_sell_default_image = zp_cross_sell_featured_image | img_url: 'master' %} {% assign zp_first_selected_variant_image_id = '' | append: zp_cross_sell_first_selected_variant.image.id | strip %}{% if zp_cross_sell_image_type == 'variant' and zp_show_variants_selectors == true and zp_first_selected_variant_image_id.size > 0 %}{% assign zp_cross_sell_featured_image = zp_cross_sell_first_selected_variant.image %}{% endif %}{% assign zp_cross_sell_image_srcset_available = true %} {% assign zp_cross_sell_image_sizes_data = '1080:--:220x' %} {% assign zp_product_image_sizes_data_parts = '' | append: zp_cross_sell_image_sizes_data | split: ':|~|:' %}{% assign zp_product_image_src_set_string = '' %}{% assign zp_product_image_sizes_list_string = '' %}{% assign zp_product_image_sizes_json_string = '' %}{% assign zp_current_cross_sell_image_size = nil %}{% for zp_image_size_data in zp_product_image_sizes_data_parts %} {% assign zp_image_size_data_parts = '' | append: zp_image_size_data | split: ':--:' %} {% assign zp_image_screen_size = zp_image_size_data_parts[0] %} {% assign zp_image_resize_filter = zp_image_size_data_parts[1] %} {% if zp_image_screen_size.size > 0 and zp_image_resize_filter.size > 0 %} {% assign zp_product_image_url_with_filter = zp_cross_sell_featured_image | img_url: zp_image_resize_filter %} {% assign zp_image_screen_size_width = zp_image_screen_size | append: 'w' %} {% assign zp_product_image_src_set_string = zp_product_image_src_set_string | append: zp_product_image_url_with_filter | append: ' ' | append: zp_image_screen_size_width | append: '__zp1575881642__' %} {% assign zp_product_image_sizes_list_string = zp_product_image_sizes_list_string | append: zp_image_screen_size | append: 'px' | append: '__zp1575881642__' %} {% assign zp_image_screen_size_width_json = zp_image_screen_size_width | json %} {% assign zp_image_resize_filter_json = zp_image_resize_filter | json %} {% assign zp_product_image_sizes_json_string = zp_product_image_sizes_json_string | append: '{"filter":' | append: zp_image_resize_filter_json | append: ',"screen":' | append: zp_image_screen_size_width_json | append: '}' | append: '__zp1575881642__' %} {% unless zp_current_cross_sell_image_size %} {% assign zp_current_cross_sell_image_size = zp_image_resize_filter %} {% endunless %} {% endif %}{% endfor %}{% unless zp_current_cross_sell_image_size %} {% assign zp_current_cross_sell_image_size = '1080x' %}{% endunless %}{% assign zp_cross_sell_image_src_set = zp_product_image_src_set_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_cross_sell_image_sizes_list = zp_product_image_sizes_list_string | split: '__zp1575881642__' | join: ',' %}{% assign zp_cross_sell_image_sizes_json = zp_product_image_sizes_json_string | split: '__zp1575881642__' | join: ',' | prepend: '[' | append: ']' %} {% assign zp_cross_sell_image = zp_cross_sell_featured_image | img_url: zp_current_cross_sell_image_size %} {% capture zp_cross_sell_image_data_attrs %}sizes="{{ zp_cross_sell_image_sizes_list }}"{% if zp_cross_sell_image_srcset_available and zp_cross_sell_load_main_image %} srcset="{{ zp_cross_sell_image_src_set }}"{% endif %} data-zp-cross-sell-image data-zp-image-type="{{ zp_cross_sell_image_type }}" data-zp-image-id="{{ zp_cross_sell_featured_image.id }}" data-zp-default-image="{{ zp_cross_sell_default_image }}"{% endcapture %} {% assign zp_cross_sell_discount_data = zp_cross_sell_discount_data | split: ':' %}{% if zp_cross_sell_discount_data.size > 1 %} {% assign zp_cross_sell_discount_amount = 0 | plus: zp_cross_sell_discount_data[0] | abs %} {% assign zp_product_discount_type = '' | append: zp_cross_sell_discount_data[1] %} {% if zp_cross_sell_first_selected_variant.compare_at_price > zp_cross_sell_first_selected_variant.price %} {% assign zp_current_cross_sell_compare_at_price = zp_cross_sell_first_selected_variant.compare_at_price %} {% else %} {% assign zp_current_cross_sell_compare_at_price = nil %} {% endif %} {% if zp_product_discount_type == 'percentage' %} {% assign zp_cross_sell_discount_amount = zp_cross_sell_discount_amount | at_most: 100.0 %} {% assign zp_cross_sell_saved_amount = zp_current_cross_sell_price | times: zp_cross_sell_discount_amount | divided_by: 100 %} {% assign zp_cross_sell_saved_amount = zp_cross_sell_saved_amount | at_most: zp_current_cross_sell_price %} {% assign zp_product_discount_amount_parts = '' | append: zp_cross_sell_discount_amount | split: '.' %} {% assign zp_product_discount_decimal_part = '' | append: zp_product_discount_amount_parts[1] | default: '0' %} {% assign zp_product_discount_decimal_part = 0 | plus: zp_product_discount_decimal_part %} {% unless zp_product_discount_decimal_part > 0 %} {% assign zp_cross_sell_discount_amount = zp_product_discount_amount_parts[0] %} {% endunless %} {% assign zp_cross_sell_discount_amount = zp_cross_sell_discount_amount | append: '%' %} {% elsif zp_product_discount_type == 'compare_price' %} {% if zp_current_cross_sell_compare_at_price %} {% assign zp_cross_sell_discount_amount = zp_current_cross_sell_compare_at_price | minus: zp_current_cross_sell_price %} {% else %} {% assign zp_cross_sell_discount_amount = 0 %} {% assign zp_cross_sell_unavailable_discount_class = 'hidden' %} {% endif %} {% assign zp_cross_sell_saved_amount = zp_cross_sell_discount_amount %} {% else %} {% assign zp_cross_sell_discount_amount = zp_cross_sell_discount_amount | times: 100 | at_most: zp_current_cross_sell_price %} {% assign zp_cross_sell_saved_amount = zp_cross_sell_discount_amount %} {% assign zp_cross_sell_discount_amount = zp_cross_sell_discount_amount | money %} {% endif %} {% if zp_product_discount_type == 'compare_price' %} {% assign zp_cross_sell_sale_price = zp_current_cross_sell_price | money %} {% else %} {% assign zp_cross_sell_sale_price = zp_current_cross_sell_price | minus: zp_cross_sell_saved_amount | money %} {% endif %} {% assign zp_cross_sell_discount_amount = '-' | append: zp_cross_sell_discount_amount %} {% assign zp_cross_sell_saved_amount = zp_cross_sell_saved_amount | money %}{% else %} {% assign zp_cross_sell_sale_price = zp_current_cross_sell_price | money %} {% assign zp_cross_sell_unavailable_discount_class = 'hidden' %}{% endif %}{% assign zp_formatted_cross_sell_price = zp_current_cross_sell_price | money %}{% if zp_cross_sell_first_selected_variant.compare_at_price > zp_cross_sell_first_selected_variant.price %} {% assign zp_current_cross_sell_compare_at_price = zp_cross_sell_first_selected_variant.compare_at_price %}{% elsif zp_cross_sell_product.compare_at_price_max > zp_cross_sell_product.price_max %} {% assign zp_current_cross_sell_compare_at_price = zp_cross_sell_product.compare_at_price_max %}{% else %} {% assign zp_current_cross_sell_compare_at_price = nil %}{% endif %}{% assign zp_formatted_cross_sell_compare_at_price = zp_current_cross_sell_compare_at_price | money %} {% if zp_cross_sell_show_quantity %} {% assign zp_unavailable_cross_sell_quantity_class = '' %} {% else %} {% assign zp_unavailable_cross_sell_quantity_class = 'hidden' %} {% endif %} {% capture zp_cross_sell_variants_container %}<select id="{{ zp_cross_sell_selector }}" class="hidden noreplace" data-productid="{{ zp_cross_sell_product.id }}" data-zp-cross-sell-field="id"> {% capture zp_product_variants_selector %} {% assign zp_selected_variant_marked = false %} {% for zp_cross_sell_variant in zp_cross_sell_product.variants %} {% capture zp_product_variant_option %} {% assign zp_variant_id = '' | append: zp_cross_sell_variant.id %} {% unless zp_cross_sell_selected_variants contains zp_variant_id %} {% continue %} {% endunless %} {% endcapture %} {% capture zp_product_variant_option %} {% if zp_cross_sell_variant.available %} <option {% if zp_selected_variant_marked == false %}{% assign zp_selected_variant_marked = true %}selected="selected" {% endif %}value="{{ zp_cross_sell_variant.id }}">{{ zp_cross_sell_variant.title }} - {{ zp_cross_sell_variant.price | money_with_currency }}</option> {% else %} <option disabled="disabled">{{ zp_cross_sell_variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option> {% endif %} {% endcapture %} {{ zp_product_variant_option | strip }} {% endfor %} {% endcapture %} {{ zp_product_variants_selector | strip }} {% assign zp_product_variants_selector = '' %}{% assign zp_product_variant_option = '' %}</select>{% endcapture %} {% capture zp_cross_sell_quantity_container %}{% if zp_cross_sell_show_quantity %} {% unless zp_cross_sell_show_quantity_label == false %}<label for="{{ zp_cross_sell_selector }}-quantity">{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %} <div class="zpa-quantity-block"> <button class="zpa-btn-custom zpa-quantity-btn" type="button" data-zp-cross-sell-decrease-qty> <svg class="zpa-quantity-icon" width="14px" height="14px"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use> </svg> </button> <input id="{{ zp_cross_sell_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_cross_sell_default_quantity }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" data-zp-cross-sell-quantity data-zp-cross-sell-field="quantity"> <button class="zpa-btn-custom zpa-quantity-btn" type="button" data-zp-cross-sell-increase-qty> <svg class="zpa-quantity-icon" width="14px" height="14px"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use> </svg> </button> </div>{% else %} <input type="hidden" value="{{ zp_cross_sell_default_quantity }}" data-zp-cross-sell-quantity data-zp-cross-sell-field="quantity">{% endif %}{% endcapture %} {% capture zp_cross_sell_product_messages %}{% if zp_cross_sell_first_selected_variant.available %}<div class="zpa-cross-sell-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs hidden" data-zp-cross-sell-inventory-messages></div>{% else %}<div class="zpa-cross-sell-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs" data-zp-cross-sell-inventory-messages>{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endif %}{% if zp_show_variants_selectors_link_types contains zp_product_link_type %}<div class="zpa-product-message-wrap"><span class="zpa-product-message zpa-cross-sell-product--message hidden" data-zp-success-message="{{ zp_product_add_to_cart_msg }}" data-zp-cross-sell-messages></span></div>{% endif %}{% endcapture %} {% else %} {% capture zp_cross_sell_product_messages %}<div class="zpa-cross-sell-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs" data-zp-cross-sell-inventory-messages>{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endcapture %} {% endif %} {% else %} {% assign zp_cross_sell_product = nil %} {% capture zp_cross_sell_product_messages %}<div class="zpa-cross-sell-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs" data-zp-cross-sell-inventory-messages>{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation }}</div>{% endcapture %} {% endif %} {% endif %} {% assign zp_cross_sell_content_parts = zp_cross_sell_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_cross_sell_image | replace: '<zpcsslprc></zpcsslprc>', zp_cross_sell_sale_price | replace: 'zps_csunvavlblprdcl', zp_unavailable_cross_sell_class | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_unavailable_cross_sell_quantity_class | replace: '<zpcsvrnts></zpcsvrnts>', zp_cross_sell_variants_container | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_cross_sell_quantity_container | replace: '<zpcspmsg></zpcspmsg>', zp_cross_sell_product_messages | strip %} {% assign zp_product_content_parts = zp_product_content_parts | append: zp_cross_sell_content_parts | append: zp_cross_sell_content[1] %} {% endif %} {% endfor %} {% else %} {% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_cross_sell_image | replace: '<zpcsslprc></zpcsslprc>', zp_cross_sell_sale_price | replace: 'zps_csunvavlblprdcl', zp_unavailable_cross_sell_class | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_unavailable_cross_sell_quantity_class | replace: '<zpcsvrnts></zpcsvrnts>', zp_cross_sell_variants_container | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_cross_sell_quantity_container | replace: '<zpcspmsg></zpcspmsg>', zp_cross_sell_product_messages | strip %} {% endif %}{% endif %}
        {% capture zp_cross_sell_json_integration_content %}{% if zp_cross_sell_product %}{% capture zp_product_json %}{% if zp_integrate_with_bold_quantity_breaks == true %}{% include 'bold-product', product: zp_cross_sell_product, output: 'json' %}{% else %}{{ zp_cross_sell_product | json | default: 'null' }}{% endif %}{% endcapture %}{% if zp_product_json contains 'Liquid error: Could not find asset' %}{{ zp_cross_sell_product | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = '' %}{% else %}null{% endif %}{% endcapture %}
        {% capture zp_additional_property_integration_content %}{% capture zp_replace_integration %}<zp_additional_property_integration></zp_additional_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_property_integration>', '' | replace: '</zp_additional_property_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% capture zp_variant_integration_content %}{% capture zp_replace_integration %}<zp_variant_integration></zp_variant_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_variant_integration>', '' | replace: '</zp_variant_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% capture zp_property_integration_content %}{% if zp_integrate_with_bold_product_options == true %}<div class="bold_options" data-product-id="{{ product.id }}"></div>{% endif %}{% capture zp_replace_integration %}<zp_property_integration></zp_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_property_integration>', '' | replace: '</zp_property_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% capture zp_product_json_integration_content %}{% capture zp_replace_integration %}<zp_product_json_integration>{% capture zp_product_json %}{% if zp_integrate_with_bold_quantity_breaks == true %}{% include 'bold-product', product: product, output: 'json' %}{% else %}{{ product | json | default: 'null' }}{% endif %}{% endcapture %}{% if zp_product_json contains 'Liquid error: Could not find asset' %}{{ product | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = '' %}</zp_product_json_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_json_integration>', '' | replace: '</zp_product_json_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% capture zp_product_footer_integration_content %}{% capture zp_replace_integration %}<zp_product_footer_integration></zp_product_footer_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_footer_integration>', '' | replace: '</zp_product_footer_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% if zp_product_type == 'recharge' %}
          {% assign zp_subscription_active = '' | append: shop.metafields['subscriptions']['subscription_active'] | downcase %}{% if zp_subscription_active == 'true' %} {% assign zp_subscription_active = true %}{% else %} {% assign zp_subscription_active = false %}{% endif %}{% assign zp_product_has_subscriptions = '' | append: product.metafields['subscriptions']['has_subscription'] | downcase %}{% if zp_subscription_active and zp_product_has_subscriptions == 'true' and zp_show_variants_selectors == true %} {% assign zp_product_has_subscriptions = true %}{% else %} {% assign zp_product_has_subscriptions = false %}{% endif %}{% if zp_subscription_active %} {% assign zp_discount_amount = '' | append: product.metafields['subscriptions']['discount_percentage'] %} {% if zp_discount_amount.size > 0 %} {% assign zp_discount_amount = 0 | plus: zp_discount_amount | round: 2 %} {% else %} {% assign zp_discount_amount = 0 %} {% endif %}{% else %} {% assign zp_discount_amount = 0 %}{% endif %}{% if zp_discount_amount > 0 %} {% assign zp_product_discount_data = '' | append: zp_discount_amount | append: ':' | append: 'percentage' %}{% else %} {% assign zp_product_discount_data = '' %}{% endif %}{% assign zp_discount_type = 'percentage' %}{% if zp_product_has_subscriptions %} {% assign zp_product_price_attribute = 'data-zp-product-discount-price' %} {% assign zp_subscription_id = '' | append: product.metafields['subscriptions']['subscription_id'] | strip %} {% assign zp_deliver_every_label = '' | append: shop.metafields['subscriptions']['widget_deliver_every'] | strip | default: 'Deliver every' %} {% assign zp_purchase_type = 'autodeliver' %} {% assign zp_shipping_interval_unit_type = '' | append: product.metafields['subscriptions']['shipping_interval_unit_type'] | strip | default: 'Days' %} {% assign zp_shipping_interval_frequency = '' | append: product.metafields['subscriptions']['shipping_interval_frequency'] | strip | default: '30' | split: ',' %}{% else %} {% assign zp_product_price_attribute = 'data-zp-product-price' %}{% endif %}{% capture zp_product_variants_container %} {% if zp_show_variants_selectors == true %} {{ zp_additional_property_integration_content }}<select class="hidden noreplace" id="{{ zp_product_selector }}" {% unless zp_product_has_subscriptions %}name="id"{% endunless %} data-productid="{{ product.id }}"> {% capture zp_product_variants_selector %} {% assign zp_selected_variant_marked = false %} {% for variant in product.variants %} {% capture zp_product_variant_option %} {% assign zp_variant_id = '' | append: variant.id %} {% unless zp_selected_variants contains zp_variant_id %} {% continue %} {% endunless %} {% endcapture %} {{ zp_variant_integration_content }} {% if zp_integrate_with_bold_quantity_breaks == true %}{% include "bold-variant" with variant, hide_action: "skip" %}{% endif %} {% capture zp_product_variant_option %} {% if variant.available %} <option {% if zp_selected_variant_marked == false %}{% assign zp_selected_variant_marked = true %}selected="selected" {% endif %}value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option> {% else %} <option disabled="disabled">{{ variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option> {% endif %} {% endcapture %} {{ zp_product_variant_option | strip }} {% endfor %} {% endcapture %} {{ zp_product_variants_selector | strip }} {% assign zp_product_variants_selector = '' %}{% assign zp_product_variant_option = '' %}</select>{{ zp_property_integration_content }} {% if zp_product_has_subscriptions %} <select class="hidden noreplace" name="id" id="{{ zp_product_selector }}-recharge-variants"> {% capture zp_product_variants_selector %} {% assign zp_selected_variant_marked = false %} {% for variant in product.variants %} {% capture zp_product_variant_option %} {% assign zp_variant_id = '' | append: variant.id %} {% unless zp_selected_variants contains zp_variant_id %} {% continue %} {% endunless %} {% assign zp_recharge_variant_id = '' | append: variant.metafields['subscriptions']['discount_variant_id'] | strip | default: zp_variant_id %} {% endcapture %} {% if zp_integrate_with_bold_quantity_breaks == true %}{% include "bold-variant" with variant, hide_action: "skip" %}{% endif %} {% capture zp_product_variant_option %} {% if variant.available %} <option {% if zp_selected_variant_marked == false %}{% assign zp_selected_variant_marked = true %}selected="selected" {% endif %}value="{{ zp_recharge_variant_id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option> {% else %} <option disabled="disabled">{{ variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option> {% endif %} {% endcapture %} {{ zp_product_variant_option | strip }} {% endfor %} {% endcapture %} {{ zp_product_variants_selector | strip }} {% assign zp_product_variants_selector = '' %}{% assign zp_product_variant_option = '' %}</select> <input type="hidden" name="properties[subscription_id]" value="{{ zp_subscription_id }}"> <input type="hidden" name="properties[shipping_interval_unit_type]" value="{{ zp_shipping_interval_unit_type }}"> <input type="hidden" name="purchase_type" value="{{ zp_purchase_type }}"> <input type="hidden" name="autodeliver_{{ product.id }}" value="{{ zp_purchase_type }}"> {% if zp_shipping_interval_frequency.size == 1 %} <input type="hidden" name="properties[shipping_interval_frequency]" value="{{ zp_shipping_interval_frequency }}"> {% elsif zp_shipping_interval_frequency.size > 1 %} <div class="zpa-selector-wrapper zpa-offset-bottom-xs"> <label for="{{ zp_product_selector }}-recharge-shipping-interval">{{ zp_deliver_every_label }}</label> <select class="zpa-single-option-selector zpa-single-option-selector--xs noreplace" name="properties[shipping_interval_frequency]" id="{{ zp_product_selector }}-recharge-shipping-interval"> {% for zp_frequency in zp_shipping_interval_frequency %} <option value="{{ zp_frequency }}">{{ zp_frequency }} {% capture zp_product_variant_option %} {% if zp_frequency == "1" %} {% if zp_shipping_interval_unit_type == 'Months' %} Month {% elsif zp_shipping_interval_unit_type == 'Weeks' %} Week {% else %} Day {% endif %} {% else %} {{ zp_shipping_interval_unit_type }} {% endif %} {% endcapture %}{{ zp_product_variant_option | strip }} </option> {% endfor %}{% assign zp_product_variant_option = '' %} </select> </div> {% endif %} {% endif %} {% endif %}{% endcapture %}{% capture zp_recharge_variants_data %} {% if zp_product_has_subscriptions %} {% assign zp_product_variants_selector = '{' %} {% for variant in product.variants %} {% assign zp_recharge_variant_id = '' | append: variant.metafields['subscriptions']['discount_variant_id'] | strip | default: variant.id %} {% assign zp_product_variants_selector = zp_product_variants_selector | append: '"' | append: variant.id | append: '":"' | append: zp_recharge_variant_id | append: '",' %} {% endfor %} {% assign zp_recharge_variant_id = '}' %} {{ zp_product_variants_selector | split: ',' | join: ',' | append: zp_recharge_variant_id }} {% assign zp_product_variants_selector = '' %} {% else %} {} {% endif %}{% endcapture %}{% capture zp_product_init_script %}<script type="text/json" data-zp-product-init>{"translations":{"addToCart":"{{ zp_product_button_caption | url_escape }}","soldOut":"{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation | url_escape }}","unavailable":"{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation | url_escape }}"},"moneyFormat":"{{ shop.money_format | url_escape }}","productSelector":"{{ zp_product_selector }}","selectedVariants":"{{ zp_selected_variants_list | url_escape }}","productType":"{{ zp_product_type }}","imageSize":"{{ '' | append: zp_current_product_image_size | strip | default: 'master' | url_escape }}","productDiscountData":"{{ zp_discount_amount }}:{{ zp_discount_type }}","shopifyOptionsSelector":{{ zp_shopify_options_selector }},"initBuilder":{{ zp_any_product_variant_available }},"imageSrcSetData":{{ zp_product_image_sizes_json }},"productBlockId":"{{ zp_product_block_id }}","variantLabelClasses":"zp {{ zp_product_variant_selector_classes }}","variantSelectorView":"{{ zp_product_variant_selector_view }}","preloadVariantImages":{{ zp_product_preload_variant_images }},"showVariantLabel":{{ zp_product_show_variant_selector_label }},"rechargeVariantsData":{{ zp_recharge_variants_data | strip }},"product":{{ zp_product_json_integration_content }}}</script>{% endcapture %}{% assign zp_recharge_variants_data = '' %}
          {% assign zp_product_content_parts = zp_product_content_parts | replace: 'zps_prdprcwrpattr', zp_product_price_attribute %}
        {% else %}
          {% capture zp_product_variants_container %}{% if zp_show_variants_selectors == true %}{{ zp_additional_property_integration_content }}<select class="hidden noreplace" id="{{ zp_product_selector }}" name="id" data-productid="{{ product.id }}"> {% capture zp_product_variants_selector %} {% assign zp_selected_variant_marked = false %} {% for variant in product.variants %} {% capture zp_product_variant_option %} {% assign zp_variant_id = '' | append: variant.id %} {% unless zp_selected_variants contains zp_variant_id %} {% continue %} {% endunless %} {% endcapture %} {{ zp_variant_integration_content }} {% if zp_integrate_with_bold_quantity_breaks == true %}{% include "bold-variant" with variant, hide_action: "skip" %}{% endif %} {% capture zp_product_variant_option %} {% if variant.available %} <option {% if zp_selected_variant_marked == false %}{% assign zp_selected_variant_marked = true %}selected="selected" {% endif %}value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option> {% else %} <option disabled="disabled">{{ variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option> {% endif %} {% endcapture %} {{ zp_product_variant_option | strip }} {% endfor %} {% endcapture %} {{ zp_product_variants_selector | strip }} {% assign zp_product_variants_selector = '' %}{% assign zp_product_variant_option = '' %}</select>{{ zp_property_integration_content }}{% endif %}{% endcapture %}
          {% capture zp_product_init_script %}<script type="text/json" data-zp-product-init>{"translations":{"addToCart":"{{ zp_product_button_caption | url_escape }}","soldOut":"{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation | url_escape }}","unavailable":"{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation | url_escape }}"},"moneyFormat":"{{ shop.money_format | url_escape }}","productSelector":"{{ zp_product_selector }}","selectedVariants":"{{ zp_selected_variants_list | url_escape }}","productType":"{{ zp_product_type }}","imageSize":"{{ '' | append: zp_current_product_image_size | strip | default: 'master' | url_escape }}","productDiscountData":"{{ zp_product_discount_data }}","shopifyOptionsSelector":{{ zp_shopify_options_selector }},"initBuilder":{{ zp_any_product_variant_available }},"imageSrcSetData":{{ zp_product_image_sizes_json }},"productBlockId":"{{ zp_product_block_id }}","variantLabelClasses":"zp {{ zp_product_variant_selector_classes }}","variantSelectorView":"{{ zp_product_variant_selector_view }}","preloadVariantImages":{{ zp_product_preload_variant_images }},"showVariantLabel":{{ zp_product_show_variant_selector_label }},"crossSell":{"product":{{ zp_cross_sell_json_integration_content }},"selectedVariants":"{{ zp_cross_sell_selected_variants_list | url_escape | default: '' }}","selector":"{{ zp_cross_sell_selector | default: '' }}","available":{{ zp_cross_sell_available | default: false }},"blockId":"{{ zp_cross_sell_block_id | default: '' }}","imageSize":"{{ '' | append: zp_current_cross_sell_image_size | strip | default: 'master' | url_escape }}","imageSrcSetData":{{ zp_cross_sell_image_sizes_json | default: '[]' }},"showVariantLabel":{{ zp_cross_sell_show_variant_selector_label | default: 'false' }},"variantSelectorView":"{{ zp_cross_sell_variant_selector_view | default: 'vt' }}","shopifyOptionsSelector":{{ zp_shopify_options_selector | default: 'false' }}},"product":{{ zp_product_json_integration_content }}}</script>{% endcapture %}{% assign zp_cross_sell_product = nil %}{% assign zp_cross_sell_handle = '' %}{% assign zp_cross_sell_selected_variants = '' %}{% assign zp_cross_sell_selected_variants_list = '' %}{% assign zp_cross_sell_content_parts = '' %}{% assign zp_cross_sell_content = '' %}{% assign zp_cross_sell_block_id = '' %}{% assign zp_current_cross_sell_image_size = '' %}{% assign zp_cross_sell_image_sizes_json = '[]' %}{% assign zp_cross_sell_show_variant_selector_label = false %}{% assign zp_cross_sell_variant_selector_view = 'vt' %}
        {% endif %}
        {% capture zp_product_quantity_container %}{% if zp_show_variants_selectors == true %}{% if zp_product_show_quantity %} {% unless zp_product_show_quantity_label == false %}<label class="{% if zp_product_variant_selector_view == 'hz' %}{{ 'zpa-buybox__label zpa-offset-right-sm zpa-buybox__label zp' | append: zp_product_quantity_selector_label_classes | strip }}{% else %}{{ 'zp' | append: zp_product_quantity_selector_label_classes | strip }}{% endif %}" for="{{ zp_product_selector }}-quantity">{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %} <div class="{% if zp_product_variant_selector_view == 'hz' %}zpa-quantity-block{% else %}zpa-quantity-block{% endif %}"> <button class="zpa-btn-custom zpa-quantity-btn" type="button" data-zp-product-decrease-qty> <svg class="zpa-quantity-icon" width="14px" height="14px"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use> </svg> </button> <input id="{{ zp_product_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_product_default_quantity }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" name="quantity" data-zp-product-quantity> <button class="zpa-btn-custom zpa-quantity-btn" type="button" data-zp-product-increase-qty> <svg class="zpa-quantity-icon" width="14px" height="14px"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use> </svg> </button> </div>{% else %} <input type="hidden" name="quantity" value="{{ zp_product_default_quantity }}" data-zp-product-quantity>{% endif %}{% endif %}{% endcapture %}
        {% capture zp_product_button_integrations %}{% if zp_integrate_with_bold_quantity_breaks == true %}<div class="shappify-qty-msg">{{ bold_selected_or_first_available_variant.metafields.shappify_qb.pricing_html }}</div>{% endif %}{% capture zp_replace_integration %}<zp_product_info_integration></zp_product_info_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_info_integration>', '' | replace: '</zp_product_info_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% capture zp_product_button_messages %}{% if zp_show_variants_selectors_link_types contains zp_product_link_type %}<div class="{{ 'zpa-product-message-wrap ' | append: zp_product_message_wrapper_classes | strip }}"><span class="{{ 'zpa-product-message hidden product-success zp ' | append: zp_product_add_to_cart_classes | strip }}" data-zp-product-messages data-zp-success-message="{{ zp_product_add_to_cart_msg }}"></span></div>{% endif %}<a href="{{ zp_redirect_product_url }}" target="{{ zp_product_button_link_target }}" style="display:none!important;" data-zp-product-redirect-link></a>{% endcapture %}
        {% capture zp_product_additional_integrations %}{% if zp_integrate_with_bold_product_options %}{% assign zp_include_bold_common_snippet = true %}<script>window.BOLD.common.Shopify.saveProduct({{ product.handle | json }},{{ product.id | json }},{{ product | json }});{% for variant in product.variants %}{% assign csp_metafield_namespace = variant.id | prepend: "csp" %}window.BOLD.common.Shopify.saveVariant({{ variant.id | json }},{variant:{{ variant | json }},inventory_quantity:{{ variant.inventory_quantity | json }},product_id:{{ product.id | json }},product_handle:{{ product.handle | json }},price:{{ variant.price | json }},variant_title:{{ variant.title | json }},group_id:"{{ variant.metafields.bold_rp.rp_group_id }}",csp_metafield:{{ product.metafields[csp_metafield_namespace] | json }}});{% endfor %}</script>{% endif %}{% if zp_integrate_with_bold_product_options == true %}{% include "bold-product" with product, hide_action: "break", output: "none" %}{% elsif zp_integrate_with_bold_quantity_breaks == true %}{% include "bold-product" with product, hide_action: "break" %}{% if bold_hidden_product %}{% break %}{% endif %}{% endif %}{% capture zp_replace_integration %}<zp_additional_integration></zp_additional_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_integration>', '' | replace: '</zp_additional_integration>', '' | strip }}{% assign zp_replace_integration = '' %}{% endcapture %}
        {% assign zp_product_discount_data = zp_product_discount_data | split: ':' %}{% if zp_product_discount_data.size > 1 %} {% assign zp_product_discount_amount = 0 | plus: zp_product_discount_data[0] | abs %} {% assign zp_product_discount_type = '' | append: zp_product_discount_data[1] %} {% if zp_first_selected_variant.compare_at_price > zp_first_selected_variant.price %} {% assign zp_current_product_compare_at_price = zp_first_selected_variant.compare_at_price %} {% else %} {% assign zp_current_product_compare_at_price = nil %} {% endif %} {% if zp_product_discount_type == 'percentage' %} {% assign zp_product_discount_amount = zp_product_discount_amount | at_most: 100.0 %} {% assign zp_product_saved_amount = zp_current_product_price | times: zp_product_discount_amount | divided_by: 100 %} {% assign zp_product_saved_amount = zp_product_saved_amount | at_most: zp_current_product_price %} {% assign zp_product_discount_amount_parts = '' | append: zp_product_discount_amount | split: '.' %} {% assign zp_product_discount_decimal_part = '' | append: zp_product_discount_amount_parts[1] | default: '0' %} {% assign zp_product_discount_decimal_part = 0 | plus: zp_product_discount_decimal_part %} {% unless zp_product_discount_decimal_part > 0 %} {% assign zp_product_discount_amount = zp_product_discount_amount_parts[0] %} {% endunless %} {% assign zp_product_discount_amount = zp_product_discount_amount | append: '%' %} {% elsif zp_product_discount_type == 'compare_price' %} {% if zp_current_product_compare_at_price %} {% assign zp_product_discount_amount = zp_current_product_compare_at_price | minus: zp_current_product_price %} {% else %} {% assign zp_product_discount_amount = 0 %} {% assign zp_unavailable_discount_class = 'hidden' %} {% endif %} {% assign zp_product_saved_amount = zp_product_discount_amount %} {% else %} {% assign zp_product_discount_amount = zp_product_discount_amount | times: 100 | at_most: zp_current_product_price %} {% assign zp_product_saved_amount = zp_product_discount_amount %} {% assign zp_product_discount_amount = zp_product_discount_amount | money %} {% endif %} {% if zp_product_discount_type == 'compare_price' %} {% assign zp_product_sale_price = zp_current_product_price | money %} {% else %} {% assign zp_product_sale_price = zp_current_product_price | minus: zp_product_saved_amount | money %} {% endif %} {% assign zp_product_discount_amount = '-' | append: zp_product_discount_amount %} {% assign zp_product_saved_amount = zp_product_saved_amount | money %}{% else %} {% assign zp_product_sale_price = zp_current_product_price | money %} {% assign zp_unavailable_discount_class = 'hidden' %}{% endif %}{% assign zp_formatted_product_price = zp_current_product_price | money %}{% if zp_first_selected_variant.compare_at_price > zp_first_selected_variant.price %} {% assign zp_current_product_compare_at_price = zp_first_selected_variant.compare_at_price %}{% elsif product.compare_at_price_max > product.price_max %} {% assign zp_current_product_compare_at_price = product.compare_at_price_max %}{% else %} {% assign zp_current_product_compare_at_price = nil %}{% endif %}{% assign zp_formatted_product_compare_at_price = zp_current_product_compare_at_price | money %}
      {% elsif zp_product_content_parts contains zp_opened_cross_sell_tag %}
        {% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_image_src = 'no-image.gif' | img_url: '220x' %}{% assign zp_cross_sell_image = zp_cross_sell_empty_image_src %}{% assign zp_cross_sell_sale_price = 0 %}{% assign zp_unavailable_cross_sell_class = 'hidden' %}{% assign zp_cross_sell_image_data_attrs = '' %}{% assign zp_unavailable_cross_sell_quantity_class = 'hidden' %}{% assign zp_cross_sell_variants_container = '' %}{% assign zp_cross_sell_quantity_container = '' %}{% assign zp_cross_sell_inventory_messages = '' %}{% assign zp_cross_sell_product_messages = '' %}{% assign zp_cross_sell_load_main_image = true %}{% assign zp_cross_sell_show_quantity_label = true %}{% assign zp_cross_sell_show_variant_selector_label = true %}{% assign zp_cross_sell_default_quantity = '1' %}{% assign zp_cross_sell_variant_selector_view = 'vt' %}
        {% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_cross_sell_image | replace: '<zpcsslprc></zpcsslprc>', zp_cross_sell_sale_price | replace: 'zps_csunvavlblprdcl', zp_unavailable_cross_sell_class | replace: 'zps_csimgdattr', zp_cross_sell_image_data_attrs | replace: 'zps_csunvavlblqtycl', zp_unavailable_cross_sell_quantity_class | replace: '<zpcsvrnts></zpcsvrnts>', zp_cross_sell_variants_container | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_cross_sell_quantity_container | replace: '<zpcspmsg></zpcspmsg>', zp_cross_sell_product_messages | replace: '<zpdcsproduct ', '<div ' | replace: '</zpdcsproduct>', '</div>' | strip %}
      {% endif %}
      {% if zp_product_found %}
        {% capture zp_product_button_text %}<span class="zpa-btn-custom__caption" data-zp-add-to-cart-text>{% if zp_any_product_variant_available == true %}{{ zp_product_button_caption }}{% else %}{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}{% endif %}</span><svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use xlink:href="#buyButtonLoader"></use></svg>{% endcapture %}
      {% endif %}
    {% endif %}
    {% assign zp_product_content_parts = zp_product_content_parts | replace: 'zp_product_wrapper_selector', zp_product_wrapper_selector | replace: '<zpprdprc></zpprdprc>', zp_formatted_product_price | replace: '<zpprdcompareprc></zpprdcompareprc>', zp_formatted_product_compare_at_price | replace: '<zpprdvrnts></zpprdvrnts>', zp_product_variants_container | replace: '<zpprdqtyctrl></zpprdqtyctrl>', zp_product_quantity_container | replace: '<zpprdform>', zp_product_form_open_tag | replace: '</zpprdform>', zp_product_form_closed_tag | replace: 'zps_unvavlblprdcl', zp_unavailable_product_class | replace: 'zps_unavlbldccl', zp_unavailable_discount_class | replace: 'zps_unvavlblqtycl', zp_unavailable_quantity_class | replace: '<zpprdbtntxt></zpprdbtntxt>', zp_product_button_text | replace: 'zps_prdbtntp', zp_product_button_type | replace: '<zpprdbtnintgr></zpprdbtnintgr>', zp_product_button_integrations | replace: '<zpprdbtnmsg></zpprdbtnmsg>', zp_product_button_messages | replace: 'zps_prdimgsrc', zp_product_image | replace: 'zps_prdimgdattr', zp_product_image_data_attrs | replace: '<zpprdslprc></zpprdslprc>', zp_product_sale_price | replace: '<zpprdsvdprc></zpprdsvdprc>', zp_product_saved_amount | replace: '<zpprddcsamnt></zpprddcsamnt>', zp_product_discount_amount | replace: '<zpprdimgldr></zpprdimgldr>', zp_product_image_loader_content | replace: '<zppradtnfintgr></zppradtnfintgr>', zp_product_additional_footer_integration | strip %}
    {% if zp_product_static_price_content.size > 0 %} {% assign zp_product_static_price_content = zp_product_static_price_content | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %} {% if zp_app_integrations contains 'bestcurrencyconverter' %} {% assign zp_static_price = zp_product_static_price_content | strip | strip_html | split: '' %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = "0123456789,. '" | split: '' %}{% assign zp_price_delimiter_detected = false %}{% for zp_tmp_part in zp_static_price %} {% if zp_available_chars contains zp_tmp_part %} {% if zp_tmp_part == ',' or zp_tmp_part == '.' %} {% assign zp_price_delimiter_detected = true %} {% assign zp_static_price_char = zp_tmp_part %} {% elsif zp_tmp_part == ' ' and zp_price_delimiter_detected %} {% assign zp_price_delimiter_detected = false %} {% assign zp_static_price_char = '__zp1575881642__' %} {% else %} {% assign zp_static_price_char = zp_tmp_part %} {% endif %} {% else %} {% assign zp_static_price_char = '__zp1575881642__' %} {% endif %} {% assign zp_static_selected_prices = zp_static_selected_prices | append: zp_static_price_char %}{% endfor %}{% assign zp_static_price = '' %}{% assign zp_static_selected_prices = zp_static_selected_prices | split: '__zp1575881642__' %}{% for zp_tmp_part in zp_static_selected_prices %} {% assign zp_tmppart = '' | append: zp_tmp_part | strip %} {% if zp_tmppart.size > 0 %} {% assign zp_tmppart = zp_amount_format_template | replace: zp_amount_template, zp_tmppart %} {% assign zp_tmppart_without_html = zp_tmppart | strip_html | strip %} {% assign zp_product_static_price_content = zp_product_static_price_content | replace: zp_tmppart_without_html, zp_tmppart %} {% endif %}{% endfor %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = '' %}{% assign zp_tmppart = '' %}{% assign zp_tmppart_without_html = '' %} {% endif %} {% assign zp_product_content_parts = zp_product_content_parts | replace: '<zpprdstcprc></zpprdstcprc>', zp_product_static_price_content %} {% endif %} {% if zp_product_static_compare_price_content.size > 0 %} {% assign zp_product_static_compare_price_content = zp_product_static_compare_price_content | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %} {% if zp_app_integrations contains 'bestcurrencyconverter' %} {% assign zp_static_price = zp_product_static_compare_price_content | strip | strip_html | split: '' %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = "0123456789,. '" | split: '' %}{% assign zp_price_delimiter_detected = false %}{% for zp_tmp_part in zp_static_price %} {% if zp_available_chars contains zp_tmp_part %} {% if zp_tmp_part == ',' or zp_tmp_part == '.' %} {% assign zp_price_delimiter_detected = true %} {% assign zp_static_price_char = zp_tmp_part %} {% elsif zp_tmp_part == ' ' and zp_price_delimiter_detected %} {% assign zp_price_delimiter_detected = false %} {% assign zp_static_price_char = '__zp1575881642__' %} {% else %} {% assign zp_static_price_char = zp_tmp_part %} {% endif %} {% else %} {% assign zp_static_price_char = '__zp1575881642__' %} {% endif %} {% assign zp_static_selected_prices = zp_static_selected_prices | append: zp_static_price_char %}{% endfor %}{% assign zp_static_price = '' %}{% assign zp_static_selected_prices = zp_static_selected_prices | split: '__zp1575881642__' %}{% for zp_tmp_part in zp_static_selected_prices %} {% assign zp_tmppart = '' | append: zp_tmp_part | strip %} {% if zp_tmppart.size > 0 %} {% assign zp_tmppart = zp_amount_format_template | replace: zp_amount_template, zp_tmppart %} {% assign zp_tmppart_without_html = zp_tmppart | strip_html | strip %} {% assign zp_product_static_compare_price_content = zp_product_static_compare_price_content | replace: zp_tmppart_without_html, zp_tmppart %} {% endif %}{% endfor %}{% assign zp_static_selected_prices = '' %}{% assign zp_available_chars = '' %}{% assign zp_tmppart = '' %}{% assign zp_tmppart_without_html = '' %} {% endif %} {% assign zp_product_content_parts = zp_product_content_parts | replace: '<zpprdstccprprc></zpprdstccprprc>', zp_product_static_compare_price_content %} {% endif %}
    {% assign zp_current_entity_content = zp_current_entity_content | append: zp_product_additional_integrations | append: zp_product_content_parts | append: zp_product_init_script | append: zp_product_footer_integration_content | append: zp_product_content[1] %}
    {% assign zp_product_init_script = '' %}{% assign zp_product_additional_integrations = '' %}
  {% endif %}
{% endfor %}
{% assign zp_product_image_size = nil %} {% assign zp_first_selected_variant = nil %} {% assign zp_product_variants_container = '' %} {% assign zp_product_quantity_container = '' %} {% assign zp_product_button_text = '' %} {% assign zp_product_form_open_tag = '' %} {% assign zp_product_form_closed_tag = '' %} {% assign zp_unavailable_product_class = '' %} {% assign zp_unavailable_discount_class = '' %} {% assign zp_unavailable_quantity_class = '' %} {% assign zp_product_button_type = '' %} {% assign zp_product_button_integrations = '' %} {% assign zp_product_button_messages = '' %} {% assign zp_entity_products = '' %} {% assign zp_product_content = '' %} {% assign zp_product_content_parts = '' %} {% assign zp_product_handle = '' %} {% assign zp_product_setting_key = '' %} {% assign zp_product_setting_value = '' %} {% assign zp_additional_property_integration_content = '' %} {% assign zp_variant_integration_content = '' %} {% assign zp_property_integration_content = '' %} {% assign zp_product_json_integration_content = '' %} {% assign zp_product_footer_integration_content = '' %}