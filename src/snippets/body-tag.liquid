{% include 'logic-access' %}
{% include 'logic-customer' %}

{%- capture classTemplate = -%}
template--{{ template.name | handle }}
{%- endcapture -%}

{% capture classCustomer %}
  {% if customer %} customer--in {% else %} customer--out {% endif %}
{% endcapture %}

{% capture classCustomer %}
  {% if customer %} customer--in {% else %} customer--out {% endif %}
{% endcapture %}

{% capture classAccess %}
access--{{ access }}
{% endcapture %}
{%- capture dataCustomerAccess -%}
    {{ customerAccess }}{%- endcapture -%}

{%- capture dataTemplateAccess -%}
    {{ access }}{%- endcapture -%}

{%- capture dataHandle -%}
      {{ request.path | handleize }}{% endcapture %}

{%- if customer -%}
  {% capture customerData %}
  data-customer-first-name='{{ customer.first_name }}'
  data-customer-last-name='{{customer.last_name}}'
  data-customer-email='{{  customer.email }}'
  data-url-path='{{ request.path }}'
  data-customer-tags='["{{ customer.tags | join: '","' }}"]'
  {% endcapture %}
{% else %}
{% endif %}


<body id="{{ page_title | handle }}"
      class=" {{ classTemplate }} {{ classCustomer }} {{ classAccess }}"
      data-template-access="{{ dataTemplateAccess }}"
      data-customer-access="{{ dataCustomerAccess }}"
      data-template="{{ template | handleize }}"
      data-handle="{{ dataHandle }}"
    {{ customerData  }}>
